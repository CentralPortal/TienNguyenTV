<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Details Report</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Light gray background */
        }
        /* Custom styles for alternating notes background */
        .note-even {
            background-color: #e0f2f7; /* Light blue */
        }
        .note-odd {
            background-color: #f3e8ff; /* Light purple */
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6 sm:p-8 md:p-10">
        <!-- Header Section -->
        <div class="flex flex-col items-center mb-6"> <!-- Changed to always stack vertically -->
            <h1 id="report-header" class="text-3xl sm:text-4xl font-bold text-gray-800 mb-6 text-center"></h1> <!-- Centered title and increased bottom margin -->
            <div class="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-8 mt-4"> <!-- Increased horizontal spacing on larger screens -->
                <!-- Language Selection -->
                <div class="flex items-center space-x-2">
                    <label id="language-label" for="language-select" class="text-gray-700 font-semibold text-lg"></label>
                    <select id="language-select" class="p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                        <option value="vi">Tiếng Việt</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <!-- Sort Options -->
                <div class="flex items-center space-x-2">
                    <label id="sort-label" for="sort-select" class="text-gray-700 font-semibold text-lg"></label>
                    <select id="sort-select" class="p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                        <option value="item"></option>
                        <option value="amount"></option>
                    </select>
                </div>
            </div>
            <!-- Global Note -->
            <p id="global-note" class="text-gray-700 font-semibold text-center mt-6 text-base italic px-4 py-2 bg-yellow-100 rounded-lg border-l-4 border-yellow-500"></p>
            <p class="text-gray-600 text-center text-sm mt-2">
                <!-- Removed the placeholder note as actual image URLs are now used -->
            </p>
        </div>

        <!-- Item Cards Container -->
        <div id="items-container" class="grid grid-cols-1 gap-6">
            <!-- Items will be rendered here by JavaScript -->
        </div>
    </div>

    <script>
        // Data for items in Vietnamese and English
        const itemsData = {
            "vi": {
                header: "Chi tiết mặt hàng",
                selectLabel: "Chọn ngôn ngữ",
                sortLabels: {
                    item: "Tiêu đề",
                    amount: "Số lượng ước tính"
                },
                globalNote: "* Giá thị trường thường thay đổi. Số tiền hiển thị là ước tính tốt nhất của Tiến tại thời điểm niêm yết.",
                items: [
                    {
                        item: "Nơi trú ẩn mới",
                        amount: "46.600.000 - 52.000.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/new-house.png",
                        notes: [
                            "Giá cao hơn áp dụng cho khu vực miền núi xa xôi khó khăn khi giao hàng.",
                            "Hãy giúp đạt được mục tiêu chung - hãy quyên góp những gì bạn có thể!"
                        ]
                    },
                    {
                        item: "Thực Phẩm Thiết Yếu",
                        amount: "1.100.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/new-house.png",
                        notes: [
                            "Có sẵn nhiều số lượng và mặt hàng khác nhau."
                        ]
                    },
                    {
                        item: "Hệ Thống Cấp Nước",
                        amount: "50.000.000 - 70.000.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/water-supply-system.png",
                        notes: [
                            "Hãy giúp đạt được mục tiêu chung - hãy quyên góp những gì bạn có thể!"
                        ]
                    },
                    {
                        item: "Đèn Năng Lượng Mặt Trời",
                        amount: "1.200.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/solar-light.png",
                        notes: []
                    },
                    {
                        item: "Hỗ Trợ Không Giới Hạn (Tiền mặt)",
                        amount: "Bất kì",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/cash.png",
                        notes: []
                    },
                    {
                        item: "Nhu Yếu Phẩm Cho Giấc Ngủ",
                        amount: "1.350.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/beddings.png",
                        notes: []
                    },
                    {
                        item: "Xe Đạp",
                        amount: "2.000.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/bicycle.png",
                        notes: []
                    },
                    {
                        item: "Thùng đựng nước",
                        amount: "35.000 - 40.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/water-container.png",
                        notes: []
                    },
                    {
                        item: "Bạt Che",
                        amount: "500.000-1.500.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/tarp.png",
                        notes: [
                            "Phụ thuộc vào độ dày"
                        ]
                    },
                    {
                        item: "Quạt Năng Lượng Mặt Trời",
                        amount: "2.200.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/solar-fan.png",
                        notes: []
                    },
                    {
                        item: "Đồ dùng nhà bếp",
                        amount: "2.000.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/kitchenware.png",
                        notes: []
                    },
                    {
                        item: "Chuồng Gà",
                        amount: "9.000.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/chicken-coop.png",
                        notes: []
                    },
                    {
                        item: "Giường Xếp",
                        amount: "1.450.000 - 2.000.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/portable-bed.png",
                        notes: []
                    },
                    {
                        item: "Bếp Nấu Ăn Di Động",
                        amount: "350.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/cooking-stove.png",
                        notes: []
                    },
                    {
                        item: "Bò Sinh Kế",
                        amount: "15.000.000-25.000.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/cow.png",
                        notes: []
                    },
                    {
                        item: "Thức ăn & đồ dùng thiết yếu cho bé",
                        amount: "2.000.000 - 2.500.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/baby-essentials-VN.png",
                        notes: [
                            "Tuỳ vào số lượng"
                        ]
                    },
                    {
                        item: "Sự Kiện Bữa Trưa Cộng Đồng",
                        amount: "Tùy thuộc vào số lượng bữa trưa",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/community-lunch.png",
                        notes: []
                    },
                    {
                        item: "Đồ dùng thiết yếu cho gia đình",
                        amount: "2.300.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/furnitures.png",
                        notes: []
                    },
                    {
                        item: "Sự Kiện Cứu Trợ Thực Phẩm Cộng Đồng",
                        amount: "Phụ thuộc vào số lượng gói",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/community-food-supplies.png",
                        notes: []
                    },
                    {
                        item: "Chăm sóc thiết yếu",
                        amount: "1.450.000 ₫",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/essential-care-VN.png",
                        notes: []
                    }
                ]
            },
            "en": {
                header: "Item Details",
                selectLabel: "Select Language",
                sortLabels: {
                    item: "Title",
                    amount: "Estimated Amount"
                },
                globalNote: "* Marketplace prices often vary. The amounts shown are our best estimates at the time of listing.",
                items: [
                    {
                        item: "New Shelter",
                        amount: "$1,791 - $2,000",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/new-house.png",
                        notes: [
                            "Higher price covers the difficult remote mountain area delivery.",
                            "Help us reach our goal - donate1 what you can!"
                        ]
                    },
                    {
                        item: "Essential Foods",
                        amount: "$43",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/new-house.png",
                        notes: [
                            "Different amounts and items are available"
                        ]
                    },
                    {
                        item: "Water Supply System",
                        amount: "$1,922 - $2,691",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/water-supply-system.png",
                        notes: [
                            "Help us reach our goal - donate what you can!"
                        ]
                    },
                    {
                        item: "Solar Light",
                        amount: "$47",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/solar-light.png",
                        notes: []
                    },
                    {
                        item: "Unrestricted Support (Cash)",
                        amount: "Any",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/cash.png",
                        notes: []
                    },
                    {
                        item: "Essentials for Sleep",
                        amount: "$53",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/beddings.png",
                        notes: []
                    },
                    {
                        item: "Bicycle",
                        amount: "$77",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/bicycle.png",
                        notes: []
                    },
                    {
                        item: "Water Containers",
                        amount: "$2",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/water-container.png",
                        notes: []
                    },
                    {
                        item: "Tarpaulin",
                        amount: "$20 - $58",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/tarp.png",
                        notes: [
                            "Depends on Thickness"
                        ]
                    },
                    {
                        item: "Solar Fan",
                        amount: "$85",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/solar-fan.png",
                        notes: []
                    },
                    {
                        item: "Kitchenware",
                        amount: "$77",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/kitchenware.png",
                        notes: []
                    },
                    {
                        item: "Chicken Coop",
                        amount: "$350",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/chicken-coop.png",
                        notes: []
                    },
                    {
                        item: "Cot",
                        amount: "$56 - $77",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/portable-bed.png",
                        notes: []
                    },
                    {
                        item: "Portable Cooking Oven",
                        amount: "$14",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/cooking-stove.png",
                        notes: []
                    },
                    {
                        item: "Livelihood Cow",
                        amount: "$577 - $961",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/cow.png",
                        notes: []
                    },
                    {
                        item: "Baby Food & Essentials",
                        amount: "$77 - $97",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/baby-essentials-EN.png",
                        notes: [
                            "Depends on quantity"
                        ]
                    },
                    {
                        item: "Community Lunch Event",
                        amount: "Depends on the number of lunches",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/community-lunch.png",
                        notes: []
                    },
                    {
                        item: "Household Essentials",
                        amount: "$89",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/furnitures.png",
                        notes: []
                    },
                    {
                        item: "Community Food Relief Event",
                        amount: "Depends on how many packages",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/community-supplies.png",
                        notes: []
                    },
                    {
                        item: "Essential Care",
                        amount: "$56",
                        imageUrl: "https://raw.githubusercontent.com/CentralPortal/TienNguyenTV/main/images/essential-care-EN.png",
                        notes: []
                    }
                ]
            }
        };

        const languageSelect = document.getElementById('language-select');
        const sortSelect = document.getElementById('sort-select');
        const reportHeader = document.getElementById('report-header');
        const languageLabel = document.getElementById('language-label');
        const sortLabel = document.getElementById('sort-label');
        const globalNoteElement = document.getElementById('global-note');
        const itemsContainer = document.getElementById('items-container');

        // Helper function to parse amount strings into a comparable number
        function parseAmount(amountString) {
            if (amountString.includes('Bất kì') || amountString.includes('Any')) {
                return 0; // Treat "Any" as 0 for consistent sorting
            }
            // Remove currency symbols, commas, and spaces, then parse the first number in a range
            const cleanedAmount = amountString.replace(/[₫$,]/g, '').trim();
            const firstValue = parseFloat(cleanedAmount.split('-')[0].trim());
            return isNaN(firstValue) ? 0 : firstValue; // Return 0 if parsing fails
        }

        // Function to render items based on the selected language and sort order
        function renderItems() {
            const currentLang = languageSelect.value;
            const sortBy = sortSelect.value;
            const currentData = itemsData[currentLang];

            reportHeader.textContent = currentData.header;
            languageLabel.textContent = currentData.selectLabel;
            sortLabel.textContent = currentLang === 'vi' ? 'Sắp xếp theo:' : 'Sort by:';
            globalNoteElement.textContent = currentData.globalNote;

            // Update sort options text based on language
            sortSelect.options[0].textContent = currentData.sortLabels.item;
            sortSelect.options[1].textContent = currentData.sortLabels.amount;

            // Create a copy of the items array to sort
            const sortedItems = [...currentData.items];

            if (sortBy === 'item') {
                sortedItems.sort((a, b) => a.item.localeCompare(b.item));
            } else if (sortBy === 'amount') {
                sortedItems.sort((a, b) => parseAmount(a.amount) - parseAmount(b.amount));
            }

            itemsContainer.innerHTML = ''; // Clear previous items

            sortedItems.forEach(item => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow duration-300 flex flex-col sm:flex-row items-center'; // Added flexbox for image/text alignment

                // Item Image Container (to control image size and alignment)
                const imageContainer = document.createElement('div');
                imageContainer.className = 'flex-shrink-0 mb-4 sm:mb-0 sm:mr-6'; // Added margin-right for spacing on larger screens

                const itemImage = document.createElement('img');
                itemImage.src = item.imageUrl;
                itemImage.alt = item.item;
                // Changed image styling to max-w-[300px] and removed mx-auto for left alignment
                itemImage.className = 'max-w-[300px] w-full h-48 object-cover rounded-md';
                // Fallback for broken images - using a generic placeholder as actual URLs are now provided
                itemImage.onerror = function() {
                    this.onerror=null; // Prevent infinite loop if fallback also fails
                    this.src=`https://placehold.co/300x200/CCCCCC/666666?text=Image+Not+Found`;
                };
                imageContainer.appendChild(itemImage);
                card.appendChild(imageContainer);

                // Content container for title, amount, and notes
                const contentContainer = document.createElement('div');
                contentContainer.className = 'flex-grow'; // Allows content to take remaining space

                // Item Title
                const itemTitle = document.createElement('h2');
                itemTitle.className = 'text-2xl font-semibold text-gray-900 mb-2';
                itemTitle.textContent = item.item;
                contentContainer.appendChild(itemTitle);

                // Estimated Amount
                const amountDiv = document.createElement('div');
                amountDiv.className = 'mb-4';
                const amountLabel = document.createElement('span');
                amountLabel.className = 'text-blue-600 font-bold text-lg';
                amountLabel.textContent = currentLang === 'vi' ? '👉 Số lượng ước tính:' : '👉 Estimated amount:';
                const amountValue = document.createElement('span');
                amountValue.className = 'text-black font-medium text-lg ml-2';
                amountValue.textContent = item.amount;
                amountDiv.appendChild(amountLabel);
                amountDiv.appendChild(amountValue);
                contentContainer.appendChild(amountDiv);

                // Notes section
                if (item.notes && item.notes.length > 0) {
                    const notesList = document.createElement('ul');
                    notesList.className = 'space-y-2';
                    item.notes.forEach((note, index) => {
                        const noteItem = document.createElement('li');
                        // Alternate background colors for notes
                        noteItem.className = `p-2 rounded-md ${index % 2 === 0 ? 'note-even' : 'note-odd'}`;
                        const asteriskSpan = document.createElement('span');
                        asteriskSpan.className = 'font-bold text-gray-700 mr-2';
                        asteriskSpan.textContent = '*';
                        noteItem.appendChild(asteriskSpan);
                        noteItem.appendChild(document.createTextNode(note));
                        notesList.appendChild(noteItem);
                    });
                    contentContainer.appendChild(notesList);
                }

                card.appendChild(contentContainer);
                itemsContainer.appendChild(card);
            });
        }

        // Event listener for language selection change
        languageSelect.addEventListener('change', renderItems);

        // Event listener for sort selection change
        sortSelect.addEventListener('change', renderItems);

        // Initial render on page load (default to Vietnamese and sort by item title)
        document.addEventListener('DOMContentLoaded', () => {
            languageSelect.value = 'vi'; // Set default to Vietnamese
            sortSelect.value = 'item'; // Set default sort to item title
            renderItems();
        });
    </script>
</body>
</html>
